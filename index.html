<!DOCTYPE html>
<html lang="id" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PromptForge">
    <meta name="description" content="AI Prompt Generator - Generate creative prompts from images using Gemini AI">
    <title>PromptForge - AI Prompt Generator</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- App Header -->
    <div class="app-header">
        <h1 class="app-title">PromptForge</h1>
        <p class="app-subtitle">AI Prompt Generator ‚Ä¢ Creator: <span class="creator-name">Muhammad Anggi</span></p>
    </div>

    <!-- Tabs -->
    <div class="ae-tabs" id="aeTabs">
        <div class="ae-tab is-active" data-target="pgTab">PromptForge</div>
        <div class="ae-tab" data-target="historyTab">üìú History</div>
        <div class="ae-tab" data-target="extractorTab">Extractor</div>
        <button id="btnThemeToggle" class="theme-toggle" title="Toggle Dark/Light Mode">‚òÄÔ∏è‚òÄÔ∏è</button>
    </div>

    <!-- Tab 1: PromptForge -->
    <div id="pgTab" class="ae-panel is-active">
        <main class="wrap">
            <!-- API SETTINGS Section -->
            <div class="section-card">
                <div class="section-label" id="providerToggle">
                    ‚öôÔ∏è API SETTINGS <span class="toggle-arrow">‚ñº</span>
                </div>
                <div id="providerBody" class="provider-body" style="display:none">
                    <!-- Gemini -->
                    <div class="api-row">
                        <label class="api-label">
                            <input type="radio" name="provider" value="gemini" checked>
                            <span class="provider-name">üîÆ Gemini</span>
                        </label>
                        <select id="geminiModel" class="model-select">
                            <option value="gemini-2.5-flash-lite">2.5 Flash Lite</option>
                            <option value="gemini-2.5-flash">2.5 Flash</option>
                            <option value="gemini-2.0-flash">2.0 Flash</option>
                        </select>
                    </div>
                    <!-- API Keys List (rendered by JS) -->
                    <div id="geminiKeysList" class="api-keys-list" style="margin-bottom: 8px;"></div>

                    <!-- Add New Key Row -->
                    <div class="api-add-key-row" style="display: flex; gap: 8px; margin-bottom: 8px;">
                        <input type="password" id="newGeminiKeyInput" class="api-key-input"
                            placeholder="Paste new Gemini API key..."
                            style="flex: 1; padding: 10px; border-radius: 8px; border: 1px solid var(--border); background: var(--card-bg);">
                        <button id="btnAddGeminiKey" class="btn-add-key"
                            style="padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
                            ‚ûï Add
                        </button>
                    </div>

                    <!-- Helper Row -->
                    <div class="api-helper-row" style="display: flex; gap: 8px; align-items: center;">
                        <a href="https://aistudio.google.com/apikey" target="_blank" class="btn-helper">üîë Get New API
                            Key</a>
                        <span style="font-size: 11px; color: var(--text-secondary);">Tip: Use different Google accounts
                            for multiple keys</span>
                    </div>
                </div>
            </div>

            <!-- CAPTURE SECTION -->
            <div class="section-card">
                <div class="section-label">CAPTURE SECTION</div>
                <div class="capture-instruction">
                    <div class="instruction-box">
                        <div class="instruction-title">üì∑ Cara Screenshot:</div>
                        <div class="instruction-step">1. Tekan <kbd>Win</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd></div>
                        <div class="instruction-step">2. Pilih area atau fullscreen</div>
                        <div class="instruction-step">3. Kembali ke sini, tekan <kbd>Ctrl</kbd> + <kbd>V</kbd></div>
                    </div>
                    <div class="capture-row">
                        <button id="btnPaste" class="paste-btn">üìã Paste</button>
                        <label class="file-btn">
                            üìÅ Upload
                            <input id="fileInput" type="file" accept="image/*" hidden>
                        </label>
                        <!-- Mobile Camera -->
                        <label class="camera-btn">
                            üì∏ Camera
                            <input id="cameraInput" type="file" accept="image/*" capture="environment" hidden>
                        </label>
                    </div>
                    <!-- URL Extractor -->
                    <div class="url-extractor-section">
                        <div class="url-extractor-label">üîó Extract from URL:</div>
                        <div class="url-extractor-row">
                            <input type="text" id="urlInput" class="url-input"
                                placeholder="Paste YouTube, Pinterest, IG, FB URL...">
                            <button id="btnExtractUrl" class="btn-extract-url">üñºÔ∏è Extract</button>
                        </div>
                        <div id="urlStatus" class="url-extract-status"></div>
                    </div>
                </div>
            </div>

            <!-- Preview -->
            <div id="preview" class="preview">
                <div class="placeholder">No image yet.<br>Press <kbd>Win+Shift+S</kbd> then <kbd>Ctrl+V</kbd> here</div>
            </div>

            <!-- ACTION SECTION -->
            <div class="section-card">
                <div class="section-label">ACTION SECTION</div>

                <!-- Generate Row -->
                <div class="action-generate-row">
                    <div class="output-count-box">
                        <span class="output-label">Output</span>
                        <select id="numPrompts" class="output-select">
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                            <option value="5">5</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                    <button id="btnGenerate" class="generate-btn" disabled>‚ñ∂ Generate Prompts</button>
                </div>

                <!-- Control Row -->
                <div class="action-controls-row">
                    <button id="btnPause" class="btn-control btn-pause" disabled>‚è∏ Pause</button>
                    <button id="btnStop" class="btn-control btn-stop" disabled>‚èπ Stop</button>
                    <button id="btnCopyAll" class="btn-control btn-copy">Copy All</button>
                </div>

                <!-- Export Row -->
                <div class="action-export-row">
                    <select id="exportFormat" class="export-format-select">
                        <option value="json">üìã JSON</option>
                        <option value="txt">üìÑ TXT</option>
                        <option value="csv">üìä CSV</option>
                    </select>
                    <button id="btnExport" class="btn-export">üì• Export</button>
                    <button id="btnClear" class="btn-clear">üóëÔ∏è Clear</button>
                </div>
            </div>

            <!-- OUTPUT SECTION -->
            <div class="section-card">
                <div class="section-label">OUTPUT SECTION</div>
                <div class="progress" aria-label="Progress">
                    <div class="progress__bar" id="progressBar" style="width:0%"></div>
                    <div class="progress__pct" id="progressPct">0%</div>
                </div>
                <textarea id="output" class="output" rows="8" placeholder="Prompt Output (JSON/Text)"
                    readonly></textarea>
            </div>

            <!-- Footer -->
            <footer class="marquee">
                <span>¬© Copyright by Muhammad Anggi ‚Äî ¬© Copyright by Muhammad Anggi ‚Äî </span>
            </footer>
        </main>
    </div>

    <!-- Tab 2: History -->
    <div id="historyTab" class="ae-panel">
        <div class="history-header">
            <input type="text" id="historySearch" placeholder="üîç Search prompts..." class="history-search">
            <label class="history-fav-filter">
                <input type="checkbox" id="historyShowFavs"> ‚≠ê Favorites only
            </label>
        </div>
        <div class="history-actions">
            <button id="btnClearHistory" class="btn-danger">üóëÔ∏è Clear All</button>
            <button id="btnExportHistory" class="btn-primary">üì§ Export</button>
        </div>
        <div id="historyList" class="history-list">
            <div class="history-empty">No history yet. Generate some prompts!</div>
        </div>
    </div>

    <!-- Tab 3: Extractor -->
    <div id="extractorTab" class="ae-panel">
        <button id="btnExtractAlts" class="btn-extract-alts">Extract Alts</button>
        <button id="btnCopyExtracted" class="btn-copy-extracted">Copy to Clipboard</button>
        <textarea id="extractorEditor" class="extractor-editor" placeholder="Results here (editable)‚Ä¶"></textarea>
        <div id="extractorStatus" class="extractor-status"></div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- License Modal -->
    <div id="licenseModal" class="license-modal" style="display:none">
        <div class="license-modal-box">
            <div class="license-modal-header">
                <h2>üîê PromptForge License</h2>
                <p>Activate your license to use this app</p>
            </div>
            <div class="license-modal-body">
                <div class="license-field">
                    <label>Your Device ID:</label>
                    <div class="machine-id-row">
                        <code id="machineIdDisplay">Loading...</code>
                        <button id="btnCopyMachineId" class="btn-copy-id">üìã</button>
                    </div>
                    <small>Send this ID to admin to get your license key</small>
                </div>
                <div class="license-field">
                    <label>License Key:</label>
                    <input type="text" id="licenseKeyInput" class="license-input"
                        placeholder="PF-XXXX-XXXX-XXXX-XXXX-XXXX">
                </div>
                <div id="licenseStatus" class="license-status"></div>
                <button id="btnActivateLicense" class="btn-activate">‚úÖ Activate License</button>
            </div>
            <div class="license-modal-footer">
                <small>¬© 2026 Muhammad Anggi - PromptForge</small>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>